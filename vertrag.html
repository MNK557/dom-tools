<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DomAssist Dienstleistungsvertrag</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', 'Times New Roman', serif;
            background: #f8fafc;
            padding: 20px;
            line-height: 1.8;
            color: #1e293b;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        .header h1 {
            font-size: 28px;
            margin-bottom: 10px;
        }

        .header-subtitle {
            font-size: 16px;
            opacity: 0.9;
        }

        .contract-number {
            background: rgba(255,255,255,0.2);
            display: inline-block;
            padding: 8px 20px;
            border-radius: 20px;
            margin-top: 15px;
            font-family: monospace;
            font-size: 14px;
        }

        /* Content */
        .content {
            padding: 50px;
        }

        .page {
            page-break-after: always;
            min-height: 1000px;
        }

        .page:last-of-type {
            page-break-after: auto;
        }

        /* Parties Section */
        .parties {
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 40px;
        }

        .party {
            margin-bottom: 25px;
        }

        .party:last-child {
            margin-bottom: 0;
        }

        .party-label {
            font-weight: bold;
            font-size: 14px;
            color: #64748b;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .party-details {
            font-size: 16px;
            line-height: 1.6;
        }

        .party-name {
            font-weight: bold;
            font-size: 18px;
            color: #1e293b;
            margin-bottom: 5px;
        }

        /* Package Highlight */
        .package-highlight {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
            border-left: 4px solid #667eea;
            padding: 25px;
            margin: 30px 0;
            border-radius: 8px;
        }

        .package-name {
            font-size: 24px;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 15px;
        }

        .package-details {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }

        .detail-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #e2e8f0;
        }

        .detail-label {
            font-weight: 600;
            color: #64748b;
        }

        .detail-value {
            font-weight: bold;
            color: #1e293b;
        }

        /* Paragraphs */
        .paragraph {
            margin-bottom: 30px;
        }

        .paragraph h2 {
            font-size: 18px;
            color: #1e293b;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #667eea;
        }

        .paragraph p {
            margin-bottom: 12px;
            text-align: justify;
        }

        .paragraph ul, .paragraph ol {
            margin-left: 25px;
            margin-bottom: 12px;
        }

        .paragraph li {
            margin-bottom: 8px;
        }

        /* Services List */
        .services-list {
            background: #f8fafc;
            padding: 20px;
            border-radius: 8px;
            margin: 15px 0;
        }

        .services-list li {
            padding: 8px 0;
            border-bottom: 1px solid #e2e8f0;
        }

        .services-list li:last-child {
            border-bottom: none;
        }

        /* Price Table */
        .price-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
        }

        .price-table th,
        .price-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #e2e8f0;
        }

        .price-table th {
            background: #f1f5f9;
            font-weight: bold;
            color: #1e293b;
        }

        .price-table .total-row {
            background: #f8fafc;
            font-weight: bold;
            font-size: 18px;
        }

        .price-table .price-value {
            text-align: right;
            font-weight: bold;
        }

        /* Info Boxes */
        .info-box {
            background: #dbeafe;
            border-left: 4px solid #3b82f6;
            padding: 20px;
            margin: 20px 0;
            border-radius: 4px;
        }

        .warning-box {
            background: #fef3c7;
            border-left: 4px solid #f59e0b;
            padding: 20px;
            margin: 20px 0;
            border-radius: 4px;
        }

        /* Acceptance Section */
        .acceptance-section {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0e7ff 100%);
            border: 3px solid #667eea;
            border-radius: 16px;
            padding: 40px;
            margin: 50px 0;
        }

        .acceptance-section h2 {
            color: #667eea;
            margin-bottom: 25px;
            font-size: 24px;
            text-align: center;
        }

        .checkbox-group {
            background: white;
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 25px;
        }

        .checkbox-item {
            display: flex;
            align-items: start;
            gap: 15px;
            margin-bottom: 20px;
            padding: 15px;
            border-radius: 8px;
            transition: background 0.2s;
        }

        .checkbox-item:hover {
            background: #f8fafc;
        }

        .checkbox-item input[type="checkbox"] {
            width: 24px;
            height: 24px;
            margin-top: 3px;
            cursor: pointer;
            accent-color: #667eea;
        }

        .checkbox-label {
            flex: 1;
            cursor: pointer;
            line-height: 1.6;
        }

        .checkbox-label strong {
            color: #1e293b;
        }

        /* Payment Options */
        .payment-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .payment-option {
            border: 3px solid #e2e8f0;
            border-radius: 12px;
            padding: 25px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }

        .payment-option:hover {
            border-color: #667eea;
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.2);
        }

        .payment-option.selected {
            border-color: #667eea;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
        }

        .payment-option input[type="radio"] {
            display: none;
        }

        .payment-icon {
            font-size: 48px;
            margin-bottom: 15px;
        }

        .payment-name {
            font-size: 18px;
            font-weight: bold;
            color: #1e293b;
            margin-bottom: 10px;
        }

        .payment-desc {
            font-size: 14px;
            color: #64748b;
        }

        /* Buttons */
        .button-group {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }

        .btn {
            flex: 1;
            padding: 18px 24px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            box-shadow: 0 4px 20px rgba(16, 185, 129, 0.3);
        }

        .btn-primary:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 6px 25px rgba(16, 185, 129, 0.4);
        }

        .btn-primary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn-secondary {
            background: white;
            color: #334155;
            border: 2px solid #e2e8f0;
        }

        .btn-secondary:hover {
            background: #f8fafc;
        }

        /* Footer */
        .footer {
            background: #1e293b;
            color: white;
            padding: 30px;
            text-align: center;
            font-size: 13px;
        }

        .footer p {
            margin: 5px 0;
        }

        /* Print Styles */
        @media print {
            body {
                background: white;
                padding: 0;
            }
            
            .acceptance-section,
            .button-group {
                display: none;
            }

            .page {
                page-break-after: always;
            }
        }

        @media (max-width: 768px) {
            .content {
                padding: 30px 20px;
            }

            .package-details {
                grid-template-columns: 1fr;
            }

            .payment-options {
                grid-template-columns: 1fr;
            }

            .button-group {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>üìã Dienstleistungsvertrag</h1>
            <div class="header-subtitle">Entwicklung & Betrieb eines digitalen Assistenten</div>
            <div class="contract-number" id="contract-number">Wird geladen...</div>
        </div>

        <!-- Content -->
        <div class="content">
            
            <!-- PAGE 1: Vertragsparteien & Leistung -->
            <div class="page">
                
                <!-- Vertragsparteien -->
                <div class="parties">
                    <div class="party">
                        <div class="party-label">Auftragnehmer</div>
                        <div class="party-details">
                            <div class="party-name">DomAssist Consulting i.G.</div>
                            <div>Am Elsenbruch 3, 12247 Berlin</div>
                            <div>E-Mail: support@domassist.de</div>
                            <div>Telefon: +49 (0) 176167 382 96</div>
                        </div>
                    </div>
                    <div class="party">
                        <div class="party-label">Auftraggeber</div>
                        <div class="party-details">
                            <div class="party-name" id="customer-name">Wird geladen...</div>
                            <div id="customer-details">Kundendaten werden geladen...</div>
                        </div>
                    </div>
                </div>

                <!-- Package Highlight -->
                <div class="package-highlight">
                    <div class="package-name" id="package-name">BUSINESS PAKET</div>
                    <div class="package-details">
                        <div class="detail-item">
                            <span class="detail-label">Vertragsnummer:</span>
                            <span class="detail-value" id="detail-mid">---</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Vertragsdatum:</span>
                            <span class="detail-value" id="detail-date">---</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Laufzeit:</span>
                            <span class="detail-value" id="detail-laufzeit">12 Monate</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Ihr Berater:</span>
                            <span class="detail-value" id="detail-vertreter">---</span>
                        </div>
                    </div>
                </div>

                <!-- ¬ß1 Vertragsgegenstand -->
                <div class="paragraph">
                    <h2>¬ß1 Vertragsgegenstand</h2>
                    <p>
                        Der Auftragnehmer verpflichtet sich zur Entwicklung, Implementierung und zum Betrieb eines individuell konfigurierten digitalen Assistenten (nachfolgend "System") f√ºr den Auftraggeber. Das System dient der automatisierten Bearbeitung von Kundenanfragen √ºber verschiedene Kommunikationskan√§le.
                    </p>
                    <p>
                        Dieser Vertrag regelt die Rechte und Pflichten beider Vertragsparteien im Rahmen der Entwicklung, Implementierung, des Betriebs und der Wartung des Systems.
                    </p>
                </div>

                <!-- ¬ß2 Leistungsumfang -->
                <div class="paragraph">
                    <h2>¬ß2 Leistungsumfang</h2>
                    <p>
                        Der Auftragnehmer erbringt folgende Leistungen im Rahmen des gew√§hlten Pakets <strong id="contract-package">BUSINESS</strong>:
                    </p>
                    <div class="services-list" id="services-list">
                        <!-- Wird dynamisch gef√ºllt -->
                    </div>
                    
                    <p style="margin-top: 20px;">
                        <strong>2.1 Einrichtungsphase (Setup):</strong> Die Einrichtung umfasst die Analyse der Kundenanforderungen, Konfiguration des Systems, Integration in bestehende Systeme (soweit technisch m√∂glich), Schulung des Auftraggebers und Testphase.
                    </p>
                    <p>
                        <strong>2.2 Betriebsphase:</strong> Nach erfolgreichem Abschluss der Einrichtungsphase √ºbernimmt der Auftragnehmer den laufenden Betrieb, die Wartung und Optimierung des Systems.
                    </p>
                    <p>
                        <strong>2.3 Support:</strong> Der Auftragnehmer bietet Support per E-Mail und Telefon w√§hrend der Gesch√§ftszeiten (Mo-Fr, 9-17 Uhr). Premium-Support mit erweiterten Zeiten kann gegen Aufpreis vereinbart werden.
                    </p>
                </div>

                <!-- ¬ß3 Preise & Zahlungsbedingungen -->
                <div class="paragraph">
                    <h2>¬ß3 Preise und Zahlungsbedingungen</h2>
                    <p>
                        F√ºr die vertraglich vereinbarten Leistungen gelten folgende Preise (alle Preise zzgl. gesetzlicher Mehrwertsteuer):
                    </p>
                    
                    <table class="price-table">
                        <thead>
                            <tr>
                                <th>Position</th>
                                <th>Beschreibung</th>
                                <th class="price-value">Betrag</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Einrichtungsgeb√ºhr</td>
                                <td>Einmalige Setup- und Konfigurationsgeb√ºhr</td>
                                <td class="price-value" id="price-setup">799,00 ‚Ç¨</td>
                            </tr>
                            <tr>
                                <td>Monatliche Servicegeb√ºhr</td>
                                <td>Betrieb, Wartung, Support und Optimierung</td>
                                <td class="price-value" id="price-monthly">149,00 ‚Ç¨</td>
                            </tr>
                            <tr class="total-row">
                                <td colspan="2">Gesamtkosten erstes Jahr</td>
                                <td class="price-value" id="price-total">2.587,00 ‚Ç¨</td>
                            </tr>
                        </tbody>
                    </table>

                    <p>
                        <strong>3.1 F√§lligkeit:</strong> Die Einrichtungsgeb√ºhr ist mit Vertragsschluss zur Zahlung f√§llig. Die monatliche Servicegeb√ºhr ist jeweils am ersten Werktag des Monats im Voraus f√§llig.
                    </p>
                    <p>
                        <strong>3.2 Zahlungsweise:</strong> Die Zahlung erfolgt wahlweise per SEPA-Lastschrift, √úberweisung, Kreditkarte oder Barzahlung. Bei Zahlung per SEPA-Lastschrift erteilt der Auftraggeber ein entsprechendes Mandat.
                    </p>
                    <p>
                        <strong>3.3 Verzug:</strong> Bei Zahlungsverzug ist der Auftragnehmer berechtigt, Verzugszinsen in H√∂he von 9 Prozentpunkten √ºber dem Basiszinssatz (bei Verbrauchern: 5 Prozentpunkte) zu berechnen. Der Auftragnehmer kann nach erfolgloser Mahnung die Leistungserbringung einstellen.
                    </p>
                    <p>
                        <strong>3.4 Preisanpassung:</strong> Der Auftragnehmer ist berechtigt, die Preise mit einer Ank√ºndigungsfrist von 3 Monaten anzupassen. Bei Erh√∂hung um mehr als 10% hat der Auftraggeber ein au√üerordentliches K√ºndigungsrecht.
                    </p>
                </div>

            </div>

            <!-- PAGE 2: Laufzeit & Pflichten -->
            <div class="page">
                
                <!-- ¬ß4 Laufzeit & K√ºndigung -->
                <div class="paragraph">
                    <h2>¬ß4 Vertragslaufzeit und K√ºndigung</h2>
                    <p>
                        <strong>4.1 Mindestvertragslaufzeit:</strong> Der Vertrag wird f√ºr eine Mindestlaufzeit von <strong id="contract-duration">12 Monaten</strong> ab Inbetriebnahme des Systems geschlossen.
                    </p>
                    <p>
                        <strong>4.2 Verl√§ngerung:</strong> Der Vertrag verl√§ngert sich nach Ablauf der Mindestvertragslaufzeit automatisch um jeweils weitere 12 Monate, sofern er nicht mit einer Frist von 3 Monaten zum Ende der jeweiligen Laufzeit gek√ºndigt wird.
                    </p>
                    <p>
                        <strong>4.3 Ordentliche K√ºndigung:</strong> Beide Parteien k√∂nnen den Vertrag nach Ablauf der Mindestvertragslaufzeit mit einer Frist von 3 Monaten zum Monatsende in Textform (E-Mail ausreichend) k√ºndigen.
                    </p>
                    <p>
                        <strong>4.4 Au√üerordentliche K√ºndigung:</strong> Das Recht zur au√üerordentlichen K√ºndigung aus wichtigem Grund bleibt unber√ºhrt. Ein wichtiger Grund liegt insbesondere vor bei:
                    </p>
                    <ul>
                        <li>Zahlungsverzug des Auftraggebers von mehr als 2 Monatsgeb√ºhren</li>
                        <li>Schwerwiegender Versto√ü gegen vertragliche Pflichten</li>
                        <li>Er√∂ffnung des Insolvenzverfahrens √ºber das Verm√∂gen einer Partei</li>
                    </ul>
                    <p>
                        <strong>4.5 Folgen der Beendigung:</strong> Bei Vertragsende stellt der Auftragnehmer den Betrieb des Systems ein. Bereits gezahlte Betr√§ge werden nicht erstattet. Der Auftraggeber erh√§lt auf Wunsch eine Exportdatei der erfassten Kundendaten.
                    </p>
                </div>

                <!-- ¬ß5 Pflichten des Auftraggebers -->
                <div class="paragraph">
                    <h2>¬ß5 Mitwirkungspflichten des Auftraggebers</h2>
                    <p>
                        Der Auftraggeber verpflichtet sich zur Mitwirkung bei der Vertragserf√ºllung:
                    </p>
                    <ol>
                        <li><strong>Informationsbereitstellung:</strong> Rechtzeitige und vollst√§ndige Bereitstellung aller f√ºr die Systemeinrichtung erforderlichen Informationen, Zug√§nge und Materialien.</li>
                        <li><strong>Erreichbarkeit:</strong> Benennung eines Ansprechpartners, der f√ºr R√ºckfragen w√§hrend der Einrichtungsphase zeitnah erreichbar ist.</li>
                        <li><strong>Technische Voraussetzungen:</strong> Bereitstellung der erforderlichen technischen Voraussetzungen (Internetzugang, E-Mail-Postfach, ggf. Telefonanlage, Kalender-System).</li>
                        <li><strong>Inhalte:</strong> Bereitstellung und Pflege von Inhalten wie FAQ-Katalogen, Preislisten, √ñffnungszeiten etc.</li>
                        <li><strong>Datenschutz:</strong> Einhaltung datenschutzrechtlicher Vorgaben bei der Nutzung des Systems, insbesondere Einholung erforderlicher Einwilligungen von Kunden.</li>
                        <li><strong>Rechtm√§√üige Nutzung:</strong> Nutzung des Systems nur f√ºr rechtm√§√üige Zwecke und im Einklang mit geltendem Recht.</li>
                    </ol>
                    <p>
                        Verz√∂gerungen durch mangelhafte Mitwirkung des Auftraggebers gehen nicht zu Lasten des Auftragnehmers und k√∂nnen zu Mehrkosten f√ºhren, die gesondert in Rechnung gestellt werden.
                    </p>
                </div>

                <!-- ¬ß6 Gew√§hrleistung & Haftung -->
                <div class="paragraph">
                    <h2>¬ß6 Gew√§hrleistung und Haftung</h2>
                    <p>
                        <strong>6.1 Verf√ºgbarkeit:</strong> Der Auftragnehmer strebt eine Verf√ºgbarkeit des Systems von 99% im Jahresmittel an (ausgenommen geplante Wartungsfenster). Eine Garantie f√ºr eine bestimmte Verf√ºgbarkeit wird nicht √ºbernommen.
                    </p>
                    <p>
                        <strong>6.2 M√§ngel:</strong> Treten M√§ngel oder St√∂rungen auf, wird der Auftragnehmer diese nach Mitteilung durch den Auftraggeber in angemessener Frist beseitigen. Kleinere M√§ngel, die die Nutzbarkeit nicht wesentlich beeintr√§chtigen, berechtigen nicht zur Minderung oder R√ºcktritt.
                    </p>
                    <p>
                        <strong>6.3 Haftungsbeschr√§nkung:</strong>
                    </p>
                    <ul>
                        <li>Bei leichter Fahrl√§ssigkeit haftet der Auftragnehmer nur bei Verletzung wesentlicher Vertragspflichten (Kardinalpflichten) und begrenzt auf den vorhersehbaren, vertragstypischen Schaden.</li>
                        <li>Die Haftung f√ºr mittelbare Sch√§den, Folgesch√§den und entgangenen Gewinn ist ausgeschlossen, soweit gesetzlich zul√§ssig.</li>
                        <li>Die Haftungsbeschr√§nkungen gelten nicht bei Vorsatz, grober Fahrl√§ssigkeit, Verletzung von Leben, K√∂rper oder Gesundheit sowie bei √úbernahme ausdr√ºcklicher Garantien.</li>
                        <li>Die Haftung nach dem Produkthaftungsgesetz bleibt unber√ºhrt.</li>
                    </ul>
                    <p>
                        <strong>6.4 Datensicherung:</strong> Der Auftraggeber ist selbst f√ºr die Sicherung seiner Daten verantwortlich. Der Auftragnehmer empfiehlt regelm√§√üige Backups wichtiger Informationen.
                    </p>
                    <p>
                        <strong>6.5 H√∂here Gewalt:</strong> Der Auftragnehmer haftet nicht f√ºr Leistungsst√∂rungen aufgrund h√∂herer Gewalt, Streik, Aussperrung oder beh√∂rdlicher Ma√ünahmen.
                    </p>
                </div>

            </div>

            <!-- PAGE 3: Datenschutz & Geheimhaltung -->
            <div class="page">
                
                <!-- ¬ß7 Datenschutz -->
                <div class="paragraph">
                    <h2>¬ß7 Datenschutz</h2>
                    <p>
                        <strong>7.1 Auftragsverarbeitung:</strong> Soweit der Auftragnehmer im Rahmen der Leistungserbringung personenbezogene Daten des Auftraggebers verarbeitet, erfolgt dies im Rahmen einer Auftragsverarbeitung gem√§√ü Art. 28 DSGVO. Die Einzelheiten werden in einem separaten Auftragsverarbeitungsvertrag (AVV) geregelt.
                    </p>
                    <p>
                        <strong>7.2 Technische und organisatorische Ma√ünahmen:</strong> Der Auftragnehmer hat technische und organisatorische Ma√ünahmen (TOMs) gem√§√ü Art. 32 DSGVO implementiert, um ein dem Risiko angemessenes Schutzniveau zu gew√§hrleisten:
                    </p>
                    <ul>
                        <li>Verschl√ºsselte Daten√ºbertragung (TLS/SSL)</li>
                        <li>Zugriffskontrolle und Authentifizierung</li>
                        <li>Regelm√§√üige Sicherheitsupdates</li>
                        <li>Backup-Systeme zur Datenwiederherstellung</li>
                        <li>Schulung der Mitarbeiter zu Datenschutz und Datensicherheit</li>
                    </ul>
                    <p>
                        <strong>7.3 Datenverarbeitung in der EU:</strong> Die Verarbeitung personenbezogener Daten erfolgt ausschlie√ülich auf Servern innerhalb der Europ√§ischen Union.
                    </p>
                    <p>
                        <strong>7.4 Pflichten des Auftraggebers:</strong> Der Auftraggeber ist als Verantwortlicher im Sinne der DSGVO daf√ºr verantwortlich:
                    </p>
                    <ul>
                        <li>Die erforderlichen Rechtsgrundlagen f√ºr die Datenverarbeitung sicherzustellen</li>
                        <li>Seine Kunden ordnungsgem√§√ü √ºber die Datenverarbeitung zu informieren (Datenschutzerkl√§rung)</li>
                        <li>Erforderliche Einwilligungen einzuholen</li>
                        <li>Betroffenenrechte (Auskunft, L√∂schung, etc.) zu erf√ºllen</li>
                    </ul>
                    <p>
                        <strong>7.5 Datenl√∂schung:</strong> Nach Vertragsende werden personenbezogene Daten innerhalb von 30 Tagen gel√∂scht, sofern keine gesetzlichen Aufbewahrungspflichten entgegenstehen.
                    </p>
                </div>

                <!-- ¬ß8 Geheimhaltung -->
                <div class="paragraph">
                    <h2>¬ß8 Vertraulichkeit und Geheimhaltung</h2>
                    <p>
                        <strong>8.1 Vertrauliche Informationen:</strong> Beide Parteien verpflichten sich, alle im Rahmen der Gesch√§ftsbeziehung bekannt gewordenen Informationen, die als vertraulich gekennzeichnet sind oder deren Vertraulichkeit sich aus den Umst√§nden ergibt, streng vertraulich zu behandeln.
                    </p>
                    <p>
                        <strong>8.2 Weitergabe:</strong> Vertrauliche Informationen d√ºrfen nur an Mitarbeiter und Subunternehmer weitergegeben werden, die diese zur Vertragserf√ºllung ben√∂tigen und ebenfalls zur Vertraulichkeit verpflichtet sind.
                    </p>
                    <p>
                        <strong>8.3 Ausnahmen:</strong> Die Geheimhaltungspflicht gilt nicht f√ºr Informationen, die:
                    </p>
                    <ul>
                        <li>√∂ffentlich bekannt sind oder werden, ohne dass dies auf einer Pflichtverletzung beruht</li>
                        <li>der empfangenden Partei bereits rechtm√§√üig bekannt waren</li>
                        <li>von Dritten rechtm√§√üig ohne Verschwiegenheitspflicht mitgeteilt wurden</li>
                        <li>aufgrund gesetzlicher oder beh√∂rdlicher Verpflichtung offengelegt werden m√ºssen</li>
                    </ul>
                    <p>
                        <strong>8.4 Fortbestand:</strong> Die Geheimhaltungsverpflichtung besteht auch nach Beendigung des Vertragsverh√§ltnisses f√ºr weitere 3 Jahre fort.
                    </p>
                    <p>
                        <strong>8.5 Referenzen:</strong> Der Auftragnehmer darf den Auftraggeber nach R√ºcksprache als Referenzkunden nennen und das Logo des Auftraggebers zu Marketingzwecken verwenden, sofern der Auftraggeber nicht widerspricht.
                    </p>
                </div>

                <!-- ¬ß9 Widerrufsrecht -->
                <div class="paragraph">
                    <h2>¬ß9 Widerrufsrecht und Widerrufsausschluss</h2>
                    
                    <div class="info-box">
                        <p><strong>F√ºr Unternehmer (B2B):</strong></p>
                        <p>Dieses Widerrufsrecht besteht nicht, wenn der Auftraggeber Unternehmer im Sinne des ¬ß 14 BGB ist.</p>
                    </div>

                    <div class="warning-box">
                        <p><strong>F√ºr Verbraucher (B2C):</strong></p>
                        <p>
                            Als Verbraucher haben Sie grunds√§tzlich ein gesetzliches Widerrufsrecht gem√§√ü ¬ß 355 BGB. 
                        </p>
                        <p style="margin-top: 15px;">
                            <strong>Ausschluss des Widerrufsrechts:</strong>
                        </p>
                        <p>
                            Das Widerrufsrecht erlischt gem√§√ü ¬ß 356 Abs. 4 BGB bei Dienstleistungen, wenn der Unternehmer die Dienstleistung vollst√§ndig erbracht hat und mit der Ausf√ºhrung der Dienstleistung erst begonnen hat, nachdem der Verbraucher dazu seine ausdr√ºckliche Zustimmung gegeben hat und gleichzeitig seine Kenntnis davon best√§tigt hat, dass er sein Widerrufsrecht bei vollst√§ndiger Vertragserf√ºllung durch den Unternehmer verliert.
                        </p>
                        <p style="margin-top: 15px;">
                            Dar√ºber hinaus besteht kein Widerrufsrecht bei Vertr√§gen zur Lieferung von Waren, die nicht vorgefertigt sind und f√ºr deren Herstellung eine individuelle Auswahl oder Bestimmung durch den Verbraucher ma√ügeblich ist (¬ß 312g Abs. 2 Nr. 1 BGB). Dies trifft auf das individuell konfigurierte System zu.
                        </p>
                    </div>

                    <p style="margin-top: 20px;">
                        <strong>Ausdr√ºckliche Zustimmung:</strong> Mit Vertragsschluss stimmt der Auftraggeber (sofern Verbraucher) ausdr√ºcklich zu, dass der Auftragnehmer sofort mit der Vertragserf√ºllung beginnt. Der Auftraggeber best√§tigt seine Kenntnis davon, dass er durch diese Zustimmung bei vollst√§ndiger Vertragserf√ºllung sein Widerrufsrecht verliert.
                    </p>
                </div>

            </div>

            <!-- PAGE 4: Schlussbestimmungen & Unterschriften -->
            <div class="page">
                
                <!-- ¬ß10 Schlussbestimmungen -->
                <div class="paragraph">
                    <h2>¬ß10 Schlussbestimmungen</h2>
                    <p>
                        <strong>10.1 Schriftform:</strong> √Ñnderungen und Erg√§nzungen dieses Vertrages bed√ºrfen zu ihrer Wirksamkeit der Textform (E-Mail ausreichend). Dies gilt auch f√ºr die √Ñnderung dieser Schriftformklausel.
                    </p>
                    <p>
                        <strong>10.2 Abtretung:</strong> Die Abtretung von Rechten und Pflichten aus diesem Vertrag ist nur mit vorheriger schriftlicher Zustimmung der anderen Partei zul√§ssig.
                    </p>
                    <p>
                        <strong>10.3 Salvatorische Klausel:</strong> Sollten einzelne Bestimmungen dieses Vertrages unwirksam oder undurchf√ºhrbar sein oder werden, bleibt die Wirksamkeit der √ºbrigen Bestimmungen hiervon unber√ºhrt. Die Parteien verpflichten sich, eine unwirksame oder undurchf√ºhrbare Bestimmung durch eine wirksame zu ersetzen, die dem wirtschaftlichen Zweck der unwirksamen Regelung am n√§chsten kommt.
                    </p>
                    <p>
                        <strong>10.4 Anwendbares Recht:</strong> F√ºr diesen Vertrag gilt ausschlie√ülich das Recht der Bundesrepublik Deutschland unter Ausschluss des UN-Kaufrechts (CISG). Bei Vertr√§gen mit Verbrauchern gilt diese Rechtswahl nur insoweit, als dadurch keine zwingenden gesetzlichen Bestimmungen des Staates, in dem der Verbraucher seinen gew√∂hnlichen Aufenthalt hat, eingeschr√§nkt werden.
                    </p>
                    <p>
                        <strong>10.5 Gerichtsstand:</strong> Ist der Auftraggeber Kaufmann, juristische Person des √∂ffentlichen Rechts oder √∂ffentlich-rechtliches Sonderverm√∂gen, ist ausschlie√ülicher Gerichtsstand f√ºr alle Streitigkeiten aus diesem Vertrag Berlin. Dies gilt auch, wenn der Auftraggeber keinen allgemeinen Gerichtsstand in Deutschland hat oder Wohnsitz oder gew√∂hnlicher Aufenthalt im Zeitpunkt der Klageerhebung nicht bekannt sind.
                    </p>
                    <p>
                        <strong>10.6 Online-Streitbeilegung:</strong> Die Europ√§ische Kommission stellt eine Plattform zur Online-Streitbeilegung (OS) bereit: <a href="https://ec.europa.eu/consumers/odr" target="_blank">https://ec.europa.eu/consumers/odr</a>. Der Auftragnehmer ist zur Teilnahme an einem Streitbeilegungsverfahren vor einer Verbraucherschlichtungsstelle weder verpflichtet noch bereit.
                    </p>
                </div>

                <!-- Vertragsannahme -->
                <div class="acceptance-section">
                    <h2>‚úçÔ∏è Vertragsannahme</h2>
                    
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="accept-terms" required>
                            <label for="accept-terms" class="checkbox-label">
                                <strong>Ich habe die Vertragsbedingungen gelesen und akzeptiere sie vollumf√§nglich.</strong> Mir ist bewusst, dass dieser Vertrag rechtlich bindend ist.
                            </label>
                        </div>

                        <div class="checkbox-item">
                            <input type="checkbox" id="accept-individual" required>
                            <label for="accept-individual" class="checkbox-label">
                                <strong>Ich bin dar√ºber informiert,</strong> dass es sich um eine individuell auf meine Bed√ºrfnisse zugeschnittene Dienstleistung handelt und stimme zu, dass mit der Umsetzung sofort nach Vertragsschluss begonnen wird.
                            </label>
                        </div>

                        <div class="checkbox-item">
                            <input type="checkbox" id="accept-withdrawal" required>
                            <label for="accept-withdrawal" class="checkbox-label">
                                <strong>Ich best√§tige,</strong> dass ich zur Kenntnis genommen habe, dass aufgrund der Individualit√§t der Leistung sowie durch den sofortigen Beginn der Vertragserf√ºllung ein Widerrufsrecht ausgeschlossen ist (¬ß9 dieses Vertrages).
                            </label>
                        </div>

                        <div class="checkbox-item">
                            <input type="checkbox" id="accept-privacy" required>
                            <label for="accept-privacy" class="checkbox-label">
                                <strong>Ich habe die <a href="http://46.224.28.22/datenschutz.html" target="_blank">Datenschutzerkl√§rung</a> zur Kenntnis genommen</strong> und bin mit der Verarbeitung meiner personenbezogenen Daten einverstanden.
                            </label>
                        </div>
                    </div>

                    <h3 style="text-align: center; margin-top: 40px; margin-bottom: 20px; color: #1e293b;">
                        Bitte w√§hlen Sie Ihre Zahlungsmethode:
                    </h3>

                    <div class="payment-options">
                        <label class="payment-option" for="payment-stripe">
                            <input type="radio" name="payment" id="payment-stripe" value="stripe" checked>
                            <div class="payment-icon">üí≥</div>
                            <div class="payment-name">Online bezahlen</div>
                            <div class="payment-desc">Kreditkarte, SEPA, PayPal via Stripe</div>
                        </label>

                        <label class="payment-option" for="payment-invoice">
                            <input type="radio" name="payment" id="payment-invoice" value="invoice">
                            <div class="payment-icon">üìÑ</div>
                            <div class="payment-name">Rechnung</div>
                            <div class="payment-desc">√úberweisung oder Barzahlung</div>
                        </label>
                    </div>

                    <div class="info-box" style="margin-top: 20px;">
                        <p style="margin: 0;">
                            <strong>üìÖ Vertragsdatum:</strong> <span id="signature-date">---</span><br>
                            <strong>üîê Digitale Signatur:</strong> Durch Klick auf "Verbindlich bestellen" wird dieser Vertrag rechtskr√§ftig geschlossen.
                        </p>
                    </div>

                    <div class="button-group">
                        <button class="btn btn-secondary" onclick="window.print()">
                            üìÑ Vertrag als PDF speichern
                        </button>
                        <button class="btn btn-primary" id="btn-submit" disabled>
                            ‚úÖ Verbindlich bestellen
                        </button>
                    </div>
                </div>

            </div>

        </div>

        <!-- Footer -->
        <div class="footer">
            <p><strong>DomAssist Consulting (in Gr√ºndung)</strong> | Inhaber: Dominik Poletek</p>
            <p>Am Elsenbruch 3, 12247 Berlin</p>
            <p>E-Mail: dpo@domassist.de | Web: www.domassist.de</p>
            <p style="margin-top: 15px; font-size: 11px; opacity: 0.8;">
                Dieser Vertrag wurde elektronisch erstellt und ist ohne Unterschrift g√ºltig.
            </p>
        </div>

    </div>

    <script>
        // CONSTANTS
        const STRIPE_PUBLISHABLE_KEY = 'pk_test_...'; // Sp√§ter durch echten Key ersetzen
        
        const PACKAGE_SERVICES = {
            starter: [
                'WhatsApp-Assistent verf√ºgbar 24/7',
                'Automatische Beantwortung von Kundenanfragen',
                'Verarbeitung von bis zu 100 Anfragen pro Monat',
                'Kalenderintegration (Google/Outlook)',
                'Automatische Datenerfassung',
                'E-Mail-Benachrichtigungen bei wichtigen Anfragen',
                'Basis-Support per E-Mail (Mo-Fr, 9-17 Uhr)'
            ],
            business: [
                'Telefon-Assistent verf√ºgbar 24/7 f√ºr Anrufannahme',
                'WhatsApp-Assistent verf√ºgbar 24/7',
                'Automatische Terminbuchung in Ihrem Kalender',
                'Verarbeitung von bis zu 500 Anfragen pro Monat',
                'Kalenderintegration (Google/Outlook/Microsoft 365)',
                'Intelligente Lead-Qualifizierung',
                'CRM-Integration (Standard-Systeme)',
                'Automatische Datenerfassung und -strukturierung',
                'E-Mail- und SMS-Benachrichtigungen',
                'Priority Support per E-Mail und Telefon (Mo-Fr, 9-18 Uhr)',
                'Monatliche Performance-Reports'
            ],
            enterprise: [
                'Multi-Channel-Assistent (Telefon, WhatsApp, Web, Social Media)',
                'Unbegrenzte Anzahl von Anfragen',
                'Automatische Terminbuchung mit Konfliktmanagement',
                'Vollst√§ndige CRM-Integration (auch Custom-Systeme)',
                'Individuelle Workflow-Automatisierungen',
                'API-Zugang f√ºr eigene Integrationen',
                'Team-Management mit Rollenverteilung',
                'Advanced Analytics und Custom Reports',
                'Premium Lead-Qualifizierung mit Scoring',
                'Dedizierte Infrastruktur',
                'Priority Support 24/7 per E-Mail, Telefon und Chat',
                'Dedizierter Account Manager',
                'Monatliche Strategie-Calls und Optimierung'
            ]
        };

        // Load data from localStorage
        function loadContractData() {
            const urlParams = new URLSearchParams(window.location.search);
            const mid = urlParams.get('mid');

            if (!mid) {
                alert('Keine Vertragsnummer (MID) angegeben. Bitte verwenden Sie: vertrag.html?mid=MID-...');
                return false;
            }

            const localData = localStorage.getItem('currentCalculation');
            if (!localData) {
                alert('Keine Kalkulationsdaten gefunden. Bitte erstellen Sie zuerst ein Angebot.');
                return false;
            }

            const data = JSON.parse(localData);
            if (data.mid !== mid) {
                alert('Vertragsdaten nicht gefunden f√ºr MID: ' + mid);
                return false;
            }

            displayContract(data);
            return true;
        }

        function displayContract(data) {
            console.log('üìÑ Lade Vertrag f√ºr MID:', data.mid);

            // Contract number
            document.getElementById('contract-number').textContent = data.mid;
            document.getElementById('detail-mid').textContent = data.mid;

            // Date
            const today = new Date().toLocaleDateString('de-DE', { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });
            document.getElementById('detail-date').textContent = today;
            document.getElementById('signature-date').textContent = today;

            // Customer
            document.getElementById('customer-name').textContent = data.kundenname;
            document.getElementById('customer-details').innerHTML = `
                <div>Weitere Kundendaten wurden im Rahmen der Bedarfsanalyse erfasst</div>
                <div>Vertragsnummer: ${data.mid}</div>
            `;

            // Package
            const paketName = data.paketName || data.paket.toUpperCase();
            document.getElementById('package-name').textContent = paketName + ' PAKET';
            document.getElementById('contract-package').textContent = paketName;
            document.getElementById('detail-laufzeit').textContent = `${data.laufzeit} Monate`;
            document.getElementById('detail-vertreter').textContent = data.vertreter;
            document.getElementById('contract-duration').textContent = `${data.laufzeit} Monaten`;

            // Services
            const services = PACKAGE_SERVICES[data.paket] || PACKAGE_SERVICES.business;
            const servicesList = document.getElementById('services-list');
            servicesList.innerHTML = services.map(s => `<li>${s}</li>`).join('');

            // Prices
            const netto = {
                setup: data.setupFinal,
                monthly: data.monatlichFinal,
                year1: data.jahr1Gesamt
            };

            const brutto = {
                setup: Math.round(netto.setup * 1.19),
                monthly: Math.round(netto.monthly * 1.19),
                year1: Math.round(netto.year1 * 1.19)
            };

            document.getElementById('price-setup').textContent = 
                `${netto.setup.toLocaleString('de-DE')}‚Ç¨ (brutto: ${brutto.setup.toLocaleString('de-DE')}‚Ç¨)`;
            document.getElementById('price-monthly').textContent = 
                `${netto.monthly.toLocaleString('de-DE')}‚Ç¨ (brutto: ${brutto.monthly.toLocaleString('de-DE')}‚Ç¨)`;
            document.getElementById('price-total').textContent = 
                `${netto.year1.toLocaleString('de-DE')}‚Ç¨ (brutto: ${brutto.year1.toLocaleString('de-DE')}‚Ç¨)`;

            // Store for payment
            window.contractData = {
                mid: data.mid,
                kunde: data.kundenname,
                setupNetto: netto.setup,
                setupBrutto: brutto.setup,
                monthlyNetto: netto.monthly,
                monthlyBrutto: brutto.monthly,
                laufzeit: data.laufzeit,
                paket: data.paket,
                paketName: paketName
            };
        }

        // Checkbox validation
        function validateCheckboxes() {
            const allChecked = 
                document.getElementById('accept-terms').checked &&
                document.getElementById('accept-individual').checked &&
                document.getElementById('accept-withdrawal').checked &&
                document.getElementById('accept-privacy').checked;

            document.getElementById('btn-submit').disabled = !allChecked;
        }

        // Payment option selection
        function selectPaymentOption(option) {
            document.querySelectorAll('.payment-option').forEach(el => {
                el.classList.remove('selected');
            });
            option.classList.add('selected');
        }

        // Submit contract
        function submitContract() {
            const paymentMethod = document.querySelector('input[name="payment"]:checked').value;
            
            if (paymentMethod === 'stripe') {
                initiateStripePayment();
            } else {
                initiateInvoicePayment();
            }
        }

        function initiateStripePayment() {
            alert('Stripe Integration wird vorbereitet...\n\nSie werden gleich zur sicheren Stripe-Zahlungsseite weitergeleitet.\n\nZu zahlender Betrag: ' + window.contractData.setupBrutto + '‚Ç¨ (Setup-Geb√ºhr inkl. MwSt.)');
            
            // TODO: Stripe Checkout implementieren
            // Hier kommt sp√§ter der echte Stripe Code
            
            console.log('Stripe Payment:', {
                amount: window.contractData.setupBrutto * 100, // in Cent
                currency: 'eur',
                description: `DomAssist ${window.contractData.paketName} - Setup`,
                metadata: {
                    mid: window.contractData.mid,
                    kunde: window.contractData.kunde,
                    paket: window.contractData.paket
                }
            });
        }

        function initiateInvoicePayment() {
            // Vertrag als angenommen markieren
            const data = {
                mid: window.contractData.mid,
                kunde: window.contractData.kunde,
                zahlungsart: 'Rechnung',
                datum: new Date().toISOString(),
                status: 'Versendet' // Warte auf Zahlung
            };

            alert('‚úÖ Vertrag angenommen!\n\nSie erhalten in K√ºrze eine Rechnung per E-Mail.\n\nBitte √ºberweisen Sie den Betrag innerhalb von 14 Tagen.');
            
            // TODO: Backend-Call zum Speichern
            console.log('Rechnung angefordert:', data);
            
            // Weiterleitung zur Best√§tigungsseite
            window.location.href = `bestaetigung.html?mid=${window.contractData.mid}&payment=invoice`;
        }

        // Event Listeners
        document.addEventListener('DOMContentLoaded', function() {
            // Load contract data
            if (!loadContractData()) {
                return;
            }

            // Checkbox listeners
            ['accept-terms', 'accept-individual', 'accept-withdrawal', 'accept-privacy'].forEach(id => {
                document.getElementById(id).addEventListener('change', validateCheckboxes);
            });

            // Payment option listeners
            document.querySelectorAll('.payment-option').forEach(option => {
                option.addEventListener('click', function() {
                    selectPaymentOption(this);
                });
            });

            // Submit button
            document.getElementById('btn-submit').addEventListener('click', function() {
                if (confirm('Sind Sie sicher, dass Sie diesen Vertrag verbindlich abschlie√üen m√∂chten?')) {
                    submitContract();
                }
            });

            console.log('‚úÖ Vertrag geladen');
        });
    </script>
</body>
</html>
